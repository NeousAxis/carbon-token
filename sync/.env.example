# Backend env example for deployment (Railway/Hostinger VPS/Hetzner)
# Copy values into the platform's environment settings.
# Do NOT commit real secrets.

# Supabase
SUPABASE_URL="https://drmlsquvwybixocjwdud.supabase.co" # example; replace with yours if different
SUPABASE_SERVICE_ROLE_KEY="PASTE_SUPABASE_SERVICE_ROLE_KEY" # service role (preferred)
# If you don't have service role, use anon key only if RLS allows it (not recommended):
# SUPABASE_KEY="PASTE_SUPABASE_ANON_KEY"

# Solana RPC (devnet by default)
SOLANA_RPC_URL="https://api.devnet.solana.com"
# or RPC_URL can be used equivalently
# RPC_URL="https://api.devnet.solana.com"

# Token configuration
CBWD_MINT="5bRPS8YnNMYZm6Mw86jkJMJpj9ZpCmq7Wj78gNAFnjHC" # devnet mint
CBWD_DECIMALS="6"
TREASURY_TOKEN_ACCOUNT="PASTE_TREASURY_ATA"
OPS_TOKEN_ACCOUNT="" # optional
PAYROLL_TOKEN_ACCOUNT="" # optional

# Secrets (JSON arrays of numbers) â€” DO NOT expose publicly
MINT_AUTHORITY_SECRET_KEY='[PASTE_JSON_ARRAY]' # for MINT operations
TREASURY_OWNER_SECRET_KEY='[PASTE_JSON_ARRAY]' # for BURN operations
PAYER_SECRET_KEY='[PASTE_JSON_ARRAY]' # optional fee payer

# Behavior
DRY_RUN="true" # set to "false" for real transactions
AUTO_ENABLED="true"
AUTO_INTERVAL_MS="30000" # 30 seconds
AUTO_MINT_LIMIT="10" # MINT batch size per cycle
AUTO_BURN_LIMIT="10" # BURN batch size per cycle
# Prevent .env duplicates: the mint creation script will NOT write unless set true
AUTO_WRITE_ENV="false" # when true, create_devnet_mint.js upserts keys in .env (no append)

# Policy and compliance
# POLICY_ALLOW_SOURCES: CSV allowlist for MINT event sources.
# Default (code): "sdg,un,human_rights,nature_rights". Leave empty to refuse all MINTs.
POLICY_ALLOW_SOURCES="sdg,un,human_rights,nature_rights"
# BURN_SOURCE chooses burn token source: "treasury" | "ops" | "payroll"
# Top-up mint is only enabled when BURN_SOURCE="treasury".
BURN_SOURCE="ops"
# Mint top-up margin (basis points), optional. 50 = 0.5%
AUTO_TOPUP_EXTRA_BPS="0"

# Splits (basis points: 10000 = 100%)
OPS_BPS="25"
PAYROLL_BPS="100"
BURN_BUFFER_BPS="25"

# Port is provided by most platforms (PORT). The server supports PORT or MINT_BURN_PORT.
# MINT_BURN_PORT="3333"